import{Ea as nr,Na as U,Y as Xn,Z as Zn,_b as At,a as Et,aa as Qn,ac as rr,b as Tt,c as K,d as u,da as xe,fa as k,g as me,ga as Fe,ia as er,ic as kt,ja as Ve,l as Kn,n as Jn,o as Yn,oa as J,qa as tr,r as yt,s as wt,t as bt,va as We,wa as Y}from"./chunk-JV3ZGQQZ.js";var ir=()=>{};var ar=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Hi=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,a=i+2<t.length,l=a?t[i+2]:0,h=s>>2,p=(s&3)<<4|c>>4,d=(c&15)<<2|l>>6,m=l&63;a||(m=64,o||(d=64)),r.push(n[h],n[p],n[d],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ar(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Hi(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||l==null||p==null)throw new Rt;let d=s<<2|c>>4;if(r.push(d),l!==64){let m=c<<4&240|l>>2;if(r.push(m),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Rt=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Bi=function(t){let e=ar(t);return $e.encodeByteArray(e,!0)},_e=function(t){return Bi(t).replace(/\./g,"")},He=function(t){try{return $e.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cr(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ji=()=>cr().__FIREBASE_DEFAULTS__,zi=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qi=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&He(t[1]);return e&&JSON.parse(e)},Be=()=>{try{return ir()||ji()||zi()||qi()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Pt=t=>{var e,n;return(n=(e=Be())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Iu=t=>{let e=Pt(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ot=()=>{var t;return(t=Be())===null||t===void 0?void 0:t.config},Nt=t=>{var e;return(e=Be())===null||e===void 0?void 0:e[`_${t}`]};var X=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ie(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function ur(t){return u(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function vu(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_e(JSON.stringify(n)),_e(JSON.stringify(o)),""].join(".")}var ge={};function Gi(){let t={prod:[],emulator:[]};for(let e of Object.keys(ge))ge[e]?t.emulator.push(e):t.prod.push(e);return t}function Ki(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var sr=!1;function lr(t,e){if(typeof window>"u"||typeof document>"u"||!Ie(window.location.host)||ge[t]===e||ge[t]||sr)return;ge[t]=e;function n(d){return`__firebase__banner__${d}`}let r="__firebase__banner",s=Gi().prod.length>0;function o(){let d=document.getElementById(r);d&&d.remove()}function c(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,m){d.setAttribute("width","24"),d.setAttribute("id",m),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function l(){let d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{sr=!0,o()},d}function h(d,m){d.setAttribute("id",m),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function p(){let d=Ki(r),m=n("text"),T=document.getElementById(m)||document.createElement("span"),fe=n("learnmore"),se=document.getElementById(fe)||document.createElement("a"),pe=n("preprendIcon"),q=document.getElementById(pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){let G=d.element;c(G),h(se,fe);let Ue=l();a(q,pe),G.append(q,T,se,Ue),document.body.appendChild(G)}s?(T.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function I(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dr(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())}function Ji(){var t;let e=(t=Be())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hr(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fr(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pr(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mr(){let t=I();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Eu(){return!Ji()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function je(){try{return typeof indexedDB=="object"}catch{return!1}}function gr(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var Yi="FirebaseError",y=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Yi,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}},w=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Xi(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new y(i,c,r)}};function Xi(t,e){return t.replace(Zi,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Zi=/\{\$([^}]+)}/g;function _r(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function x(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(or(s)&&or(o)){if(!x(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function or(t){return t!==null&&typeof t=="object"}function ve(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oe(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ae(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Ir(t,e){let n=new Ct(t,e);return n.subscribe.bind(n)}var Ct=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Qi(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=St),i.error===void 0&&(i.error=St),i.complete===void 0&&(i.complete=St);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Qi(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function St(){}var Tu=14400*1e3;function b(t){return t&&t._delegate?t._delegate:t}var v=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Z="[DEFAULT]";var Dt=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new X;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ts(e))try{this.getOrInitializeService({instanceIdentifier:Z})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Z){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return u(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Z){return this.instances.has(e)}getOptions(e=Z){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:es(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Z){return this.component?this.component.multipleInstances?e:Z:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function es(t){return t===Z?void 0:t}function ts(t){return t.instantiationMode==="EAGER"}var ze=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Dt(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var ns=[],g=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(g||{}),rs={debug:g.DEBUG,verbose:g.VERBOSE,info:g.INFO,warn:g.WARN,error:g.ERROR,silent:g.SILENT},is=g.INFO,ss={[g.DEBUG]:"log",[g.VERBOSE]:"log",[g.INFO]:"info",[g.WARN]:"warn",[g.ERROR]:"error"},os=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=ss[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},F=class{constructor(e){this.name=e,this._logLevel=is,this._logHandler=os,this._userLogHandler=null,ns.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in g))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rs[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,g.DEBUG,...e),this._logHandler(this,g.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,g.VERBOSE,...e),this._logHandler(this,g.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,g.INFO,...e),this._logHandler(this,g.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,g.WARN,...e),this._logHandler(this,g.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,g.ERROR,...e),this._logHandler(this,g.ERROR,...e)}};var as=(t,e)=>e.some(n=>t instanceof n),vr,Er;function cs(){return vr||(vr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function us(){return Er||(Er=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Tr=new WeakMap,Mt=new WeakMap,yr=new WeakMap,Lt=new WeakMap,xt=new WeakMap;function ls(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(S(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Tr.set(n,t)}).catch(()=>{}),xt.set(e,t),e}function ds(t){if(Mt.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Mt.set(t,e)}var Ut={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mt.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yr.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return S(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wr(t){Ut=t(Ut)}function hs(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(qe(this),e,...n);return yr.set(r,e.sort?e.sort():[e]),S(r)}:us().includes(t)?function(...e){return t.apply(qe(this),e),S(Tr.get(this))}:function(...e){return S(t.apply(qe(this),e))}}function fs(t){return typeof t=="function"?hs(t):(t instanceof IDBTransaction&&ds(t),as(t,cs())?new Proxy(t,Ut):t)}function S(t){if(t instanceof IDBRequest)return ls(t);if(Lt.has(t))return Lt.get(t);let e=fs(t);return e!==t&&(Lt.set(t,e),xt.set(e,t)),e}var qe=t=>xt.get(t);function Ar(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=S(o);return r&&o.addEventListener("upgradeneeded",a=>{r(S(o.result),a.oldVersion,a.newVersion,S(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),c.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var ps=["get","getKey","getAll","getAllKeys","count"],ms=["put","add","delete","clear"],Ft=new Map;function br(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ft.get(e))return Ft.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=ms.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ps.includes(n)))return;let s=function(o,...c){return u(this,null,function*(){let a=this.transaction(o,i?"readwrite":"readonly"),l=a.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&a.done]))[0]})};return Ft.set(e,s),s}wr(t=>Tt(Et({},t),{get:(e,n,r)=>br(e,n)||t.get(e,n,r),has:(e,n)=>!!br(e,n)||t.has(e,n)}));var Wt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gs(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function gs(t){let e=t.getComponent();return e?.type==="VERSION"}var $t="@firebase/app",kr="0.13.2";var P=new F("@firebase/app"),_s="@firebase/app-compat",Is="@firebase/analytics-compat",vs="@firebase/analytics",Es="@firebase/app-check-compat",Ts="@firebase/app-check",ys="@firebase/auth",ws="@firebase/auth-compat",bs="@firebase/database",As="@firebase/data-connect",ks="@firebase/database-compat",Ss="@firebase/functions",Rs="@firebase/functions-compat",Cs="@firebase/installations",Ps="@firebase/installations-compat",Os="@firebase/messaging",Ns="@firebase/messaging-compat",Ds="@firebase/performance",Ls="@firebase/performance-compat",Ms="@firebase/remote-config",Us="@firebase/remote-config-compat",xs="@firebase/storage",Fs="@firebase/storage-compat",Vs="@firebase/firestore",Ws="@firebase/ai",$s="@firebase/firestore-compat",Hs="firebase",Bs="11.10.0";var Ht="[DEFAULT]",js={[$t]:"fire-core",[_s]:"fire-core-compat",[vs]:"fire-analytics",[Is]:"fire-analytics-compat",[Ts]:"fire-app-check",[Es]:"fire-app-check-compat",[ys]:"fire-auth",[ws]:"fire-auth-compat",[bs]:"fire-rtdb",[As]:"fire-data-connect",[ks]:"fire-rtdb-compat",[Ss]:"fire-fn",[Rs]:"fire-fn-compat",[Cs]:"fire-iid",[Ps]:"fire-iid-compat",[Os]:"fire-fcm",[Ns]:"fire-fcm-compat",[Ds]:"fire-perf",[Ls]:"fire-perf-compat",[Ms]:"fire-rc",[Us]:"fire-rc-compat",[xs]:"fire-gcs",[Fs]:"fire-gcs-compat",[Vs]:"fire-fst",[$s]:"fire-fst-compat",[Ws]:"fire-vertex","fire-js":"fire-js",[Hs]:"fire-js-all"};var Ee=new Map,zs=new Map,Bt=new Map;function Sr(t,e){try{t.container.addComponent(e)}catch(n){P.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function O(t){let e=t.name;if(Bt.has(e))return P.debug(`There were multiple attempts to register component ${e}.`),!1;Bt.set(e,t);for(let n of Ee.values())Sr(n,t);for(let n of zs.values())Sr(n,t);return!0}function Ge(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function E(t){return t==null?!1:t.settings!==void 0}var qs={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},V=new w("app","Firebase",qs);var jt=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new v("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw V.create("app-deleted",{appName:this._name})}};var ce=Bs;function Gt(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ht,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw V.create("bad-app-name",{appName:String(i)});if(n||(n=Ot()),!n)throw V.create("no-options");let s=Ee.get(i);if(s){if(x(n,s.options)&&x(r,s.config))return s;throw V.create("duplicate-app",{appName:i})}let o=new ze(i);for(let a of Bt.values())o.addComponent(a);let c=new jt(n,r,o);return Ee.set(i,c),c}function ye(t=Ht){let e=Ee.get(t);if(!e&&t===Ht&&Ot())return Gt();if(!e)throw V.create("no-app",{appName:t});return e}function Ke(){return Array.from(Ee.values())}function _(t,e,n){var r;let i=(r=js[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),P.warn(c.join(" "));return}O(new v(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Gs="firebase-heartbeat-database",Ks=1,Te="firebase-heartbeat-store",Vt=null;function Or(){return Vt||(Vt=Ar(Gs,Ks,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Te)}catch(n){console.warn(n)}}}}).catch(t=>{throw V.create("idb-open",{originalErrorMessage:t.message})})),Vt}function Js(t){return u(this,null,function*(){try{let n=(yield Or()).transaction(Te),r=yield n.objectStore(Te).get(Nr(t));return yield n.done,r}catch(e){if(e instanceof y)P.warn(e.message);else{let n=V.create("idb-get",{originalErrorMessage:e?.message});P.warn(n.message)}}})}function Rr(t,e){return u(this,null,function*(){try{let r=(yield Or()).transaction(Te,"readwrite");yield r.objectStore(Te).put(e,Nr(t)),yield r.done}catch(n){if(n instanceof y)P.warn(n.message);else{let r=V.create("idb-set",{originalErrorMessage:n?.message});P.warn(r.message)}}})}function Nr(t){return`${t.name}!${t.options.appId}`}var Ys=1024,Xs=30,zt=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new qt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return u(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Cr();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Xs){let o=Qs(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){P.warn(r)}})}getHeartbeatsHeader(){return u(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Cr(),{heartbeatsToSend:r,unsentEntries:i}=Zs(this._heartbeatsCache.heartbeats),s=_e(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return P.warn(n),""}})}};function Cr(){return new Date().toISOString().substring(0,10)}function Zs(t,e=Ys){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Pr(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Pr(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var qt=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return u(this,null,function*(){return je()?gr().then(()=>!0).catch(()=>!1):!1})}read(){return u(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Js(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return u(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Rr(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return u(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Rr(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Pr(t){return _e(JSON.stringify({version:2,heartbeats:t})).length}function Qs(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function eo(t){O(new v("platform-logger",e=>new Wt(e),"PRIVATE")),O(new v("heartbeat",e=>new zt(e),"PRIVATE")),_($t,kr,t),_($t,kr,"esm2017"),_("fire-js","")}eo("");var to="firebase",no="11.10.0";_(to,no,"app");function il(t,e){let n=e?.injector??k(J),r=new Kn(1),i=rr(()=>{let s;try{s=t()}catch(o){At(()=>r.error(o));return}At(()=>r.next(s))},{injector:n,manualCleanup:!0});return n.get(tr).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}function Dr(t){t===void 0&&(t=k(J));let e=t.get(We);return n=>new me(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let c=n.subscribe({next:a=>{r.next(a),o()},complete:()=>{r.complete(),o()},error:a=>{r.error(a),o()}});return c.add(()=>{r.unsubscribe(),o()}),c})}var le=new Xn("ANGULARFIRE2_VERSION");function Kt(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ye=(t,e)=>{let n=e?[e]:Ke(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ue=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(ue||{}),Lr=kt()&&typeof Zone<"u"?ue.WARN:ue.SILENT;var Je=class{zone;delegate;constructor(e,n=Yn){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,n,r)}},de=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=k(U);this.outsideAngular=n.runOutsideAngular(()=>new Je(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Je(typeof Zone>"u"?void 0:Zone.current,Jn))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Qn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Mr=!1;function ro(t,e){!Mr&&(Lr>ue.SILENT||kt())&&(Mr=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Lr>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function io(t){let e=k(U,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Q(t){let e=k(U,{optional:!0});return e?e.run(()=>t()):t()}var so=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Ve(n,()=>Q(()=>t.apply(void 0,r)))),N=(t,e,n)=>(n||=e?ue.WARN:ue.VERBOSE,function(){let r,i=arguments,s,o,c;try{s=k(de),o=k(We),c=k(er)}catch{return ro(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Q(()=>o.add())),i[l]=so(i[l],r,c));let a=io(()=>t.apply(this,i));return e?a instanceof me?a.pipe(bt(s.outsideAngular),wt(s.insideAngular),Dr(c)):a instanceof Promise?Q(()=>{let l=o.add();return new Promise((h,p)=>{a.then(d=>Ve(c,()=>Q(()=>h(d))),d=>Ve(c,()=>Q(()=>p(d)))).finally(l)})}):typeof a=="function"&&r?function(){return setTimeout(r,0),a.apply(this,arguments)}:Q(()=>a):a instanceof me?a.pipe(bt(s.outsideAngular),wt(s.insideAngular)):Q(()=>a)});var ee=class{constructor(e){return e}},we=class{constructor(){return Ke()}};function oo(t){return t&&t.length===1?t[0]:new ee(ye())}var Jt=new xe("angularfire2._apps"),ao={provide:ee,useFactory:oo,deps:[[new Y,Jt]]},co={provide:we,deps:[[new Y,Jt]]};function uo(t){return(e,n)=>{let r=n.get(nr);_("angularfire",le.full,"core"),_("angularfire",le.full,"app"),_("angular",Zn.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new ee(i)}}function bl(t,...e){return Fe([ao,co,{provide:Jt,useFactory:uo(t),multi:!0,deps:[U,J,de,...e]}])}var Al=N(Gt,!0);var lo=new Map,ho={activated:!1,tokenObservers:[]},fo={initialized:!1,enabled:!1};function A(t){return lo.get(t)||Object.assign({},ho)}function Vr(){return fo}var po="https://content-firebaseappcheck.googleapis.com/v1";var mo="exchangeDebugToken",Ur={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Ll=1440*60*1e3;var Zt=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return u(this,null,function*(){this.stop();try{this.pending=new X,this.pending.promise.catch(n=>{}),yield go(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new X,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function go(t){return new Promise(e=>{setTimeout(e,t)})}var _o={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},W=new w("appCheck","AppCheck",_o);function Wr(t){if(!A(t).activated)throw W.create("use-before-activation",{appName:t.name})}function $r(r,i){return u(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let c={method:"POST",body:JSON.stringify(e),headers:s},a;try{a=yield fetch(t,c)}catch(m){throw W.create("fetch-network-error",{originalErrorMessage:m?.message})}if(a.status!==200)throw W.create("fetch-status-error",{httpStatus:a.status});let l;try{l=yield a.json()}catch(m){throw W.create("fetch-parse-error",{originalErrorMessage:m?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw W.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,d=Date.now();return{token:l.token,expireTimeMillis:d+p,issuedAtTimeMillis:d}})}function Hr(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${po}/projects/${n}/apps/${r}:${mo}?key=${i}`,body:{debug_token:e}}}var Io="firebase-app-check-database",vo=1,Qt="firebase-app-check-store";var Xe=null;function Eo(){return Xe||(Xe=new Promise((t,e)=>{try{let n=indexedDB.open(Io,vo);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(W.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Qt,{keyPath:"compositeKey"})}}}catch(n){e(W.create("storage-open",{originalErrorMessage:n?.message}))}}),Xe)}function To(t,e){return yo(wo(t),e)}function yo(t,e){return u(this,null,function*(){let r=(yield Eo()).transaction(Qt,"readwrite"),s=r.objectStore(Qt).put({compositeKey:t,value:e});return new Promise((o,c)=>{s.onsuccess=a=>{o()},r.onerror=a=>{var l;c(W.create("storage-set",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})})}function wo(t){return`${t.options.appId}-${t.name}`}var be=new F("@firebase/app-check");function Yt(t,e){return je()?To(t,e).catch(n=>{be.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Br(){return Vr().enabled}function jr(){return u(this,null,function*(){let t=Vr();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var bo={error:"UNKNOWN_ERROR"};function Ao(t){return $e.encodeString(JSON.stringify(t),!1)}function en(t,e=!1,n=!1){return u(this,null,function*(){let r=t.app;Wr(r);let i=A(r),s=i.token,o;if(s&&!Ae(s)&&(i.token=void 0,s=void 0),!s){let l=yield i.cachedTokenPromise;l&&(Ae(l)?s=l:yield Yt(r,void 0))}if(!e&&s&&Ae(s))return{token:s.token};let c=!1;if(Br())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=$r(Hr(r,yield jr()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield Yt(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?be.warn(l.message):n&&be.error(l),Xt(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),s=yield A(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?be.warn(l.message):n&&be.error(l),o=l}let a;return s?o?Ae(s)?a={token:s.token,internalError:o}:a=Xt(o):(a={token:s.token},i.token=s,yield Yt(r,s)):a=Xt(o),c&&Co(r,a),a})}function ko(t){return u(this,null,function*(){let e=t.app;Wr(e);let{provider:n}=A(e);if(Br()){let r=yield jr(),{token:i}=yield $r(Hr(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function So(t,e,n,r){let{app:i}=t,s=A(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Ae(s.token)){let c=s.token;Promise.resolve().then(()=>{n({token:c.token}),xr(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>xr(t))}function zr(t,e){let n=A(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function xr(t){let{app:e}=t,n=A(e),r=n.tokenRefresher;r||(r=Ro(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Ro(t){let{app:e}=t;return new Zt(()=>u(null,null,function*(){let n=A(e),r;if(n.token?r=yield en(t,!0):r=yield en(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=A(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Ur.RETRIAL_MIN_WAIT,Ur.RETRIAL_MAX_WAIT)}function Co(t,e){let n=A(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ae(t){return t.expireTimeMillis-Date.now()>0}function Xt(t){return{token:Ao(bo),error:t}}var tn=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=A(this.app);for(let n of e)zr(this.app,n.next);return Promise.resolve()}};function Po(t,e){return new tn(t,e)}function Oo(t){return{getToken:e=>en(t,e),getLimitedUseToken:()=>ko(t),addTokenListener:e=>So(t,"INTERNAL",e),removeTokenListener:e=>zr(t.app,e)}}var No="@firebase/app-check",Do="0.10.1";var Lo="app-check",Fr="app-check-internal";function Mo(){O(new v(Lo,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Po(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Fr).initialize()})),O(new v(Fr,t=>{let e=t.getProvider("app-check").getImmediate();return Oo(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),_(No,Do)}Mo();var Uo="app-check";var Ze=class{constructor(){return Ye(Uo)}};var xo=["localhost","0.0.0.0","127.0.0.1"],Gl=typeof window<"u"&&xo.includes(window.location.hostname);function ai(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ci=ai,ui=new w("auth","Firebase",ai());var it=new F("@firebase/auth");function Fo(t,...e){it.logLevel<=g.WARN&&it.warn(`Auth (${ce}): ${t}`,...e)}function et(t,...e){it.logLevel<=g.ERROR&&it.error(`Auth (${ce}): ${t}`,...e)}function C(t,...e){throw Sn(t,...e)}function te(t,...e){return Sn(t,...e)}function li(t,e,n){let r=Object.assign(Object.assign({},ci()),{[e]:n});return new w("auth","Firebase",r).create(e,{appName:t.name})}function M(t){return li(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sn(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ui.create(t,...e)}function f(t,e,...n){if(!t)throw Sn(e,...n)}function D(t){let e="INTERNAL ASSERTION FAILED: "+t;throw et(e),new Error(e)}function B(t,e){t||D(e)}function on(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Vo(){return qr()==="http:"||qr()==="https:"}function qr(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Wo(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vo()||fr()||"connection"in navigator)?navigator.onLine:!0}function $o(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ne=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,B(n>e,"Short delay should be less than long delay!"),this.isMobile=dr()||pr()}get(){return Wo()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Rn(t,e){B(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var st=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;D("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;D("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;D("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Ho={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Bo=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jo=new ne(3e4,6e4);function j(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function z(s,o,c,a){return u(this,arguments,function*(t,e,n,r,i={}){return di(t,i,()=>u(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ve(Object.assign({key:t.config.apiKey},h)).slice(1),d=yield t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);let m=Object.assign({method:e,headers:d},l);return hr()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Ie(t.emulatorConfig.host)&&(m.credentials="include"),st.fetch()(yield hi(t,t.config.apiHost,n,p),m)}))})}function di(t,e,n){return u(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Ho),e);try{let i=new an(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Qe(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[a,l]=c.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qe(t,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw Qe(t,"email-already-in-use",o);if(a==="USER_DISABLED")throw Qe(t,"user-disabled",o);let h=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw li(t,h,l);C(t,h)}}catch(i){if(i instanceof y)throw i;C(t,"network-request-failed",{message:String(i)})}})}function Le(s,o,c,a){return u(this,arguments,function*(t,e,n,r,i={}){let l=yield z(t,e,n,r,i);return"mfaPendingCredential"in l&&C(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function hi(t,e,n,r){return u(this,null,function*(){let i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Rn(t.config,i):`${t.config.apiScheme}://${i}`;return Bo.includes(n)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function zo(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var an=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(te(this.auth,"network-request-failed")),jo.get())})}};function Qe(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=te(t,e,r);return i.customData._tokenResponse=n,i}function Gr(t){return t!==void 0&&t.enterprise!==void 0}var cn=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return zo(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function qo(t,e){return u(this,null,function*(){return z(t,"GET","/v2/recaptchaConfig",j(t,e))})}function Go(t,e){return u(this,null,function*(){return z(t,"POST","/v1/accounts:delete",e)})}function ot(t,e){return u(this,null,function*(){return z(t,"POST","/v1/accounts:lookup",e)})}function Se(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Cn(t,e=!1){return u(this,null,function*(){let n=b(t),r=yield n.getIdToken(e),i=Pn(r);f(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Se(nn(i.auth_time)),issuedAtTime:Se(nn(i.iat)),expirationTime:Se(nn(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function nn(t){return Number(t)*1e3}function Pn(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return et("JWT malformed, contained fewer than 3 sections"),null;try{let i=He(n);return i?JSON.parse(i):(et("Failed to decode base64 JWT payload"),null)}catch(i){return et("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Kr(t){let e=Pn(t);return f(e,"internal-error"),f(typeof e.exp<"u","internal-error"),f(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ce(t,e,n=!1){return u(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof y&&Ko(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Ko({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var un=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>u(this,null,function*(){yield this.iteration()}),n)}iteration(){return u(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Pe=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Se(this.lastLoginAt),this.creationTime=Se(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function at(t){return u(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ce(t,ot(n,{idToken:r}));f(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fi(s.providerUserInfo):[],c=Jo(t.providerData,o),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!c?.length,h=a?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Pe(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function On(t){return u(this,null,function*(){let e=b(t);yield at(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Jo(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fi(t){return t.map(e=>{var{providerId:n}=e,r=yt(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Yo(t,e){return u(this,null,function*(){let n=yield di(t,{},()=>u(null,null,function*(){let r=ve({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=yield hi(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let a={method:"POST",headers:c,body:r};return t.emulatorConfig&&Ie(t.emulatorConfig.host)&&(a.credentials="include"),st.fetch()(o,a)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Xo(t,e){return u(this,null,function*(){return z(t,"POST","/v2/accounts:revokeToken",j(t,e))})}var Re=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){f(e.idToken,"internal-error"),f(typeof e.idToken<"u","internal-error"),f(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){f(e.length!==0,"internal-error");let n=Kr(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return u(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(f(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return u(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Yo(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(f(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(f(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(f(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return D("not implemented")}};function $(t,e){f(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var H=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=yt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Pe(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return u(this,null,function*(){let n=yield Ce(this,this.stsTokenManager.getToken(this.auth,e));return f(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Cn(this,e)}reload(){return On(this)}_assign(e){this!==e&&(f(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){f(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return u(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield at(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return u(this,null,function*(){if(E(this.auth.app))return Promise.reject(M(this.auth));let e=yield this.getIdToken();return yield Ce(this,Go(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,a,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,fe=(c=n.tenantId)!==null&&c!==void 0?c:void 0,se=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,pe=(l=n.createdAt)!==null&&l!==void 0?l:void 0,q=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:G,emailVerified:Ue,isAnonymous:qn,providerData:It,stsTokenManager:Gn}=n;f(G&&Gn,e,"internal-error");let Wi=Re.fromJSON(this.name,Gn);f(typeof G=="string",e,"internal-error"),$(p,e.name),$(d,e.name),f(typeof Ue=="boolean",e,"internal-error"),f(typeof qn=="boolean",e,"internal-error"),$(m,e.name),$(T,e.name),$(fe,e.name),$(se,e.name),$(pe,e.name),$(q,e.name);let vt=new t({uid:G,auth:e,email:d,emailVerified:Ue,displayName:p,isAnonymous:qn,photoURL:T,phoneNumber:m,tenantId:fe,stsTokenManager:Wi,createdAt:pe,lastLoginAt:q});return It&&Array.isArray(It)&&(vt.providerData=It.map($i=>Object.assign({},$i))),se&&(vt._redirectEventId=se),vt}static _fromIdTokenResponse(e,n,r=!1){return u(this,null,function*(){let i=new Re;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield at(s),s})}static _fromGetAccountInfoResponse(e,n,r){return u(this,null,function*(){let i=n.users[0];f(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?fi(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Re;c.updateFromIdToken(r);let a=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Pe(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(a,l),a})}};var Jr=new Map;function L(t){B(t instanceof Function,"Expected a class definition");let e=Jr.get(t);return e?(B(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Jr.set(t,e),e)}var Zo=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return u(this,null,function*(){return!0})}_set(n,r){return u(this,null,function*(){this.storage[n]=r})}_get(n){return u(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return u(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ln=Zo;function tt(t,e,n){return`firebase:${t}:${e}:${n}`}var ct=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=tt(this.userKey,i.apiKey,s),this.fullPersistenceKey=tt("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return u(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield ot(this.auth,{idToken:e}).catch(()=>{});return n?H._fromGetAccountInfoResponse(this.auth,n,e):null}return H._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return u(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return u(this,null,function*(){if(!n.length)return new t(L(ln),e,r);let i=(yield Promise.all(n.map(l=>u(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||L(ln),o=tt(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=yield l._get(o);if(h){let p;if(typeof h=="string"){let d=yield ot(e,{idToken:h}).catch(()=>{});if(!d)break;p=yield H._fromGetAccountInfoResponse(e,d,h)}else p=H._fromJSON(e,h);l!==s&&(c=p),s=l;break}}catch{}let a=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new t(s,e,r):(s=a[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(l=>u(null,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function Yr(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_i(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pi(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vi(e))return"Blackberry";if(Ei(e))return"Webos";if(mi(e))return"Safari";if((e.includes("chrome/")||gi(e))&&!e.includes("edge/"))return"Chrome";if(Ii(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function pi(t=I()){return/firefox\//i.test(t)}function mi(t=I()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gi(t=I()){return/crios\//i.test(t)}function _i(t=I()){return/iemobile/i.test(t)}function Ii(t=I()){return/android/i.test(t)}function vi(t=I()){return/blackberry/i.test(t)}function Ei(t=I()){return/webos/i.test(t)}function Nn(t=I()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Qo(t=I()){var e;return Nn(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ea(){return mr()&&document.documentMode===10}function Ti(t=I()){return Nn(t)||Ii(t)||Ei(t)||vi(t)||/windows phone/i.test(t)||_i(t)}function yi(t,e=[]){let n;switch(t){case"Browser":n=Yr(I());break;case"Worker":n=`${Yr(I())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ce}/${r}`}var dn=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let a=e(s);o(a)}catch(a){c(a)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return u(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function ta(n){return u(this,arguments,function*(t,e={}){return z(t,"GET","/v2/passwordPolicy",j(t,e))})}var na=6,hn=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:na,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(i=a.containsLowercaseLetter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(o=a.containsNumericCharacter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(c=a.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),a}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var fn=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ut(this),this.idTokenSubscription=new ut(this),this.beforeStateQueue=new dn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ui,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=L(n)),this._initializationPromise=this.queue(()=>u(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield ct.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return u(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return u(this,null,function*(){try{let n=yield ot(this,{idToken:e}),r=yield H._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return u(this,null,function*(){var n;if(E(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===c)&&a?.user&&(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return f(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return u(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return u(this,null,function*(){try{yield at(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=$o()}_delete(){return u(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return u(this,null,function*(){if(E(this.app))return Promise.reject(M(this));let n=e?b(e):null;return n&&f(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return u(this,null,function*(){if(!this._deleted)return e&&f(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>u(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return u(this,null,function*(){return E(this.app)?Promise.reject(M(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return E(this.app)?Promise.reject(M(this)):this.queue(()=>u(this,null,function*(){yield this.assertedPersistence.setPersistence(L(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return u(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return u(this,null,function*(){let e=yield ta(this),n=new hn(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new w("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return u(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Xo(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return u(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return u(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&L(e)||this._popupRedirectResolver;f(n,this,"argument-error"),this.redirectPersistenceManager=yield ct.create(this,[L(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return u(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>u(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return u(this,null,function*(){if(e===this.currentUser)return this.queue(()=>u(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(f(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let a=e.addObserver(n,r,i);return()=>{o=!0,a()}}else{let a=e.addObserver(n);return()=>{o=!0,a()}}}directlySetCurrentUser(e){return u(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return f(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return u(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return u(this,null,function*(){var e;if(E(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Fo(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ie(t){return b(t)}var ut=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ir(n=>this.observer=n)}get next(){return f(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var gt={loadJS(){return u(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ra(t){gt=t}function wi(t){return gt.loadJS(t)}function ia(){return gt.recaptchaEnterpriseScript}function sa(){return gt.gapiScript}function bi(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var pn=class{constructor(){this.enterprise=new mn}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},mn=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var oa="recaptcha-enterprise",Ai="NO_RECAPTCHA",gn=class{constructor(e){this.type=oa,this.auth=ie(e)}verify(e="verify",n=!1){return u(this,null,function*(){function r(s){return u(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>u(null,null,function*(){qo(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let l=new cn(a);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(a=>{c(a)})}))})}function i(s,o,c){let a=window.grecaptcha;Gr(a)?a.enterprise.ready(()=>{a.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Ai)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pn().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(c=>{if(!n&&Gr(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let a=ia();a.length!==0&&(a+=c),wi(a).then(()=>{i(c,s,o)}).catch(l=>{o(l)})}}).catch(c=>{o(c)})})})}};function ke(t,e,n,r=!1,i=!1){return u(this,null,function*(){let s=new gn(t),o;if(i)o=Ai;else try{o=yield s.verify(n)}catch{o=yield s.verify(n,!0)}let c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let a=c.phoneEnrollmentInfo.phoneNumber,l=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let a=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:a,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function _n(t,e,n,r,i){return u(this,null,function*(){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let c=yield ke(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(c=>u(null,null,function*(){if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield ke(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(c)}));else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let c=yield ke(t,e,n);return r(t,c).catch(a=>u(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(a.code==="auth/missing-recaptcha-token"||a.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield ke(t,e,n,!1,!0);return r(t,h)}return Promise.reject(a)}))}else{let c=yield ke(t,e,n,!1,!0);return r(t,c)}else return Promise.reject(i+" provider is not supported.")})}function Dn(t,e){let n=Ge(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(x(s,e??{}))return i;C(i,"already-initialized")}return n.initialize({options:e})}function aa(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(L);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ln(t,e,n){let r=ie(t);f(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=ki(e),{host:o,port:c}=ca(e),a=c===null?"":`:${c}`,l={url:`${s}//${o}${a}/`},h=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){f(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),f(x(l,r.config.emulator)&&x(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ie(o)?(ur(`${s}//${o}${a}`),lr("Auth",!0)):i||ua()}function ki(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ca(t){let e=ki(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Xr(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Xr(o)}}}function Xr(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function ua(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Oe=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return D("not implemented")}_getIdTokenResponse(e){return D("not implemented")}_linkToIdToken(e,n){return D("not implemented")}_getReauthenticationResolver(e){return D("not implemented")}};function la(t,e){return u(this,null,function*(){return z(t,"POST","/v1/accounts:signUp",e)})}function da(t,e){return u(this,null,function*(){return Le(t,"POST","/v1/accounts:signInWithPassword",j(t,e))})}function ha(t,e){return u(this,null,function*(){return Le(t,"POST","/v1/accounts:signInWithEmailLink",j(t,e))})}function fa(t,e){return u(this,null,function*(){return Le(t,"POST","/v1/accounts:signInWithEmailLink",j(t,e))})}var Ne=class t extends Oe{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return u(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _n(e,n,"signInWithPassword",da,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ha(e,{email:this._email,oobCode:this._password});default:C(e,"internal-error")}})}_linkToIdToken(e,n){return u(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _n(e,r,"signUpPassword",la,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return fa(e,{idToken:n,email:this._email,oobCode:this._password});default:C(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function rn(t,e){return u(this,null,function*(){return Le(t,"POST","/v1/accounts:signInWithIdp",j(t,e))})}function pa(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ma(t){let e=oe(ae(t)).link,n=e?oe(ae(e)).deep_link_id:null,r=oe(ae(t)).deep_link_id;return(r?oe(ae(r)).link:null)||r||n||e||t}var lt=class t{constructor(e){var n,r,i,s,o,c;let a=oe(ae(e)),l=(n=a.apiKey)!==null&&n!==void 0?n:null,h=(r=a.oobCode)!==null&&r!==void 0?r:null,p=pa((i=a.mode)!==null&&i!==void 0?i:null);f(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=a.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=a.lang)!==null&&o!==void 0?o:null,this.tenantId=(c=a.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let n=ma(e);try{return new t(n)}catch{return null}}};var Si=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ne._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=lt.parseLink(r);return f(i,"argument-error"),Ne._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),dt=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var In=class extends dt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function ga(t,e){return u(this,null,function*(){return Le(t,"POST","/v1/accounts:signUp",j(t,e))})}var he=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return u(this,null,function*(){let s=yield H._fromIdTokenResponse(e,r,i),o=Zr(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return u(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Zr(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Zr(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var vn=class t extends y{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function Ri(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vn._fromErrorAndOperation(t,s,e,r):s})}function _a(t,e,n=!1){return u(this,null,function*(){let r=yield Ce(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return he._forOperation(t,"link",r)})}function Ia(t,e,n=!1){return u(this,null,function*(){let{auth:r}=t;if(E(r.app))return Promise.reject(M(r));let i="reauthenticate";try{let s=yield Ce(t,Ri(r,i,e,t),n);f(s.idToken,r,"internal-error");let o=Pn(s.idToken);f(o,r,"internal-error");let{sub:c}=o;return f(t.uid===c,r,"user-mismatch"),he._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&C(r,"user-mismatch"),s}})}function Ci(t,e,n=!1){return u(this,null,function*(){if(E(t.app))return Promise.reject(M(t));let r="signIn",i=yield Ri(t,r,e),s=yield he._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Mn(t,e){return u(this,null,function*(){return Ci(ie(t),e)})}function Pi(t){return u(this,null,function*(){let e=ie(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Un(t,e,n){return u(this,null,function*(){if(E(t.app))return Promise.reject(M(t));let r=ie(t),o=yield _n(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ga,"EMAIL_PASSWORD_PROVIDER").catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Pi(t),a}),c=yield he._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(c.user),c})}function xn(t,e,n){return E(t.app)?Promise.reject(M(t)):Mn(b(t),Si.credential(e,n)).catch(r=>u(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Pi(t),r}))}function Fn(t,e,n,r){return b(t).onIdTokenChanged(e,n,r)}function Vn(t,e,n){return b(t).beforeAuthStateChanged(e,n)}function Wn(t,e,n,r){return b(t).onAuthStateChanged(e,n,r)}function $n(t){return b(t).signOut()}var ht="__sak";var ft=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ht,"1"),this.storage.removeItem(ht),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var va=1e3,Ea=10,Ta=(()=>{class t extends ft{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ti(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,a,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);ea()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,Ea):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},va)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return u(this,null,function*(){yield K(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return u(this,null,function*(){let r=yield K(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return u(this,null,function*(){yield K(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Oi=Ta;var ya=(()=>{class t extends ft{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Hn=ya;function wa(t){return Promise.all(t.map(e=>u(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var ba=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return u(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let a=Array.from(c).map(h=>u(this,null,function*(){return h(r.origin,o)})),l=yield wa(a);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Ni(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var En=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return u(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,a)=>{let l=Ni("",20);i.port1.start();let h=setTimeout(()=>{a(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let d=p;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(d.data.response);break;default:clearTimeout(h),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function R(){return window}function Aa(t){R().location.href=t}function Di(){return typeof R().WorkerGlobalScope<"u"&&typeof R().importScripts=="function"}function ka(){return u(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Sa(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Ra(){return Di()?self:null}var Li="firebaseLocalStorageDb",Ca=1,pt="firebaseLocalStorage",Mi="fbase_key",re=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function _t(t,e){return t.transaction([pt],e?"readwrite":"readonly").objectStore(pt)}function Pa(){let t=indexedDB.deleteDatabase(Li);return new re(t).toPromise()}function Tn(){let t=indexedDB.open(Li,Ca);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(pt,{keyPath:Mi})}catch(i){n(i)}}),t.addEventListener("success",()=>u(null,null,function*(){let r=t.result;r.objectStoreNames.contains(pt)?e(r):(r.close(),yield Pa(),e(yield Tn()))}))})}function Qr(t,e,n){return u(this,null,function*(){let r=_t(t,!0).put({[Mi]:e,value:n});return new re(r).toPromise()})}function Oa(t,e){return u(this,null,function*(){let n=_t(t,!1).get(e),r=yield new re(n).toPromise();return r===void 0?null:r.value})}function ei(t,e){let n=_t(t,!0).delete(e);return new re(n).toPromise()}var Na=800,Da=3,La=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return u(this,null,function*(){return this.db?this.db:(this.db=yield Tn(),this.db)})}_withRetries(n){return u(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Da)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return u(this,null,function*(){return Di()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return u(this,null,function*(){this.receiver=ba._getInstance(Ra()),this.receiver._subscribe("keyChanged",(n,r)=>u(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>u(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return u(this,null,function*(){var n,r;if(this.activeServiceWorker=yield ka(),!this.activeServiceWorker)return;this.sender=new En(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return u(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Sa()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return u(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Tn();return yield Qr(n,ht,"1"),yield ei(n,ht),!0}catch{}return!1})}_withPendingWrite(n){return u(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return u(this,null,function*(){return this._withPendingWrite(()=>u(this,null,function*(){return yield this._withRetries(i=>Qr(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return u(this,null,function*(){let r=yield this._withRetries(i=>Oa(i,n));return this.localCache[n]=r,r})}_remove(n){return u(this,null,function*(){return this._withPendingWrite(()=>u(this,null,function*(){return yield this._withRetries(r=>ei(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return u(this,null,function*(){let n=yield this._withRetries(s=>{let o=_t(s,!1).getAll();return new re(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>u(this,null,function*(){return this._poll()}),Na)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Ui=La;var td=bi("rcb"),nd=new ne(3e4,6e4);function Ma(t,e){return e?L(e):(f(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var De=class extends Oe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return rn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return rn(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Ua(t){return Ci(t.auth,new De(t),t.bypassAuthState)}function xa(t){let{auth:e,user:n}=t;return f(n,e,"internal-error"),Ia(n,new De(t),t.bypassAuthState)}function Fa(t){return u(this,null,function*(){let{auth:e,user:n}=t;return f(n,e,"internal-error"),_a(n,new De(t),t.bypassAuthState)})}var yn=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>u(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return u(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let a={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(a))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ua;case"linkViaPopup":case"linkViaRedirect":return Fa;case"reauthViaPopup":case"reauthViaRedirect":return xa;default:C(this.auth,"internal-error")}}resolve(e){B(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){B(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var rd=new ne(2e3,1e4);var Va="pendingRedirect",nt=new Map,wn=class t extends yn{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return u(this,null,function*(){let e=nt.get(this.auth._key());if(!e){try{let r=(yield Wa(this.resolver,this.auth))?yield K(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nt.set(this.auth._key(),e)}return this.bypassAuthState||nt.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return u(this,null,function*(){if(e.type==="signInViaRedirect")return K(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,K(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return u(this,null,function*(){})}cleanUp(){}};function Wa(t,e){return u(this,null,function*(){let n=Ba(e),r=Ha(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function $a(t,e){nt.set(t._key(),e)}function Ha(t){return L(t._redirectPersistence)}function Ba(t){return tt(Va,t.config.apiKey,t.name)}function ja(t,e,n=!1){return u(this,null,function*(){if(E(t.app))return Promise.reject(M(t));let r=ie(t),i=Ma(r,e),o=yield new wn(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var za=600*1e3,bn=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qa(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xi(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(te(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=za&&this.cachedEventUids.clear(),this.cachedEventUids.has(ti(e))}saveEventToCache(e){this.cachedEventUids.add(ti(e)),this.lastProcessedEventTime=Date.now()}};function ti(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xi({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function qa(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xi(t);default:return!1}}function Ga(n){return u(this,arguments,function*(t,e={}){return z(t,"GET","/v1/projects",e)})}var Ka=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ja=/^https?/;function Ya(t){return u(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield Ga(t);for(let n of e)try{if(Xa(n))return}catch{}C(t,"unauthorized-domain")})}function Xa(t){let e=on(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Ja.test(n))return!1;if(Ka.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Za=new ne(3e4,6e4);function ni(){let t=R().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Qa(t){return new Promise((e,n)=>{var r,i,s;function o(){ni(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ni(),n(te(t,"network-request-failed"))},timeout:Za.get()})}if(!((i=(r=R().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=R().gapi)===null||s===void 0)&&s.load)o();else{let c=bi("iframefcb");return R()[c]=()=>{gapi.load?o():n(te(t,"network-request-failed"))},wi(`${sa()}?onload=${c}`).catch(a=>n(a))}}).catch(e=>{throw rt=null,e})}var rt=null;function ec(t){return rt=rt||Qa(t),rt}var tc=new ne(5e3,15e3),nc="__/auth/iframe",rc="emulator/auth/iframe",ic={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oc(t){let e=t.config;f(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Rn(e,rc):`https://${t.config.authDomain}/${nc}`,r={apiKey:e.apiKey,appName:t.name,v:ce},i=sc.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ve(r).slice(1)}`}function ac(t){return u(this,null,function*(){let e=yield ec(t),n=R().gapi;return f(n,t,"internal-error"),e.open({where:document.body,url:oc(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ic,dontclear:!0},r=>new Promise((i,s)=>u(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=te(t,"network-request-failed"),c=R().setTimeout(()=>{s(o)},tc.get());function a(){R().clearTimeout(c),i(r)}r.ping(a).then(a,()=>{s(o)})})))})}var cc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uc=500,lc=600,dc="_blank",hc="http://localhost",mt=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function fc(t,e,n,r=uc,i=lc){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",a=Object.assign(Object.assign({},cc),{width:r.toString(),height:i.toString(),top:s,left:o}),l=I().toLowerCase();n&&(c=gi(l)?dc:n),pi(l)&&(e=e||hc,a.scrollbars="yes");let h=Object.entries(a).reduce((d,[m,T])=>`${d}${m}=${T},`,"");if(Qo(l)&&c!=="_self")return pc(e||"",c),new mt(null);let p=window.open(e||"",c,h);f(p,t,"popup-blocked");try{p.focus()}catch{}return new mt(p)}function pc(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var mc="__/auth/handler",gc="emulator/auth/handler",_c=encodeURIComponent("fac");function ri(t,e,n,r,i,s){return u(this,null,function*(){f(t.config.authDomain,t,"auth-domain-config-required"),f(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ce,eventId:i};if(e instanceof dt){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_r(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof In){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let c=o;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let a=yield t._getAppCheckToken(),l=a?`#${_c}=${encodeURIComponent(a)}`:"";return`${Ic(t)}?${ve(c).slice(1)}${l}`})}function Ic({config:t}){return t.emulator?Rn(t,gc):`https://${t.authDomain}/${mc}`}var sn="webStorageSupport",An=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hn,this._completeRedirectFn=ja,this._overrideRedirectResult=$a}_openPopup(e,n,r,i){return u(this,null,function*(){var s;B((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield ri(e,n,r,on(),i);return fc(e,o,Ni())})}_openRedirect(e,n,r,i){return u(this,null,function*(){yield this._originValidation(e);let s=yield ri(e,n,r,on(),i);return Aa(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(B(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return u(this,null,function*(){let n=yield ac(e),r=new bn(e);return n.register("authEvent",i=>(f(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sn,{type:sn},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[sn];o!==void 0&&n(!!o),C(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ya(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ti()||mi()||Nn()}},Fi=An;var ii="@firebase/auth",si="1.10.8";var kn=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return u(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){f(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function vc(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ec(t){O(new v("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;f(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let a={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yi(t)},l=new fn(r,i,s,a);return aa(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),O(new v("auth-internal",e=>{let n=ie(e.getProvider("auth").getImmediate());return(r=>new kn(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_(ii,si,vc(t)),_(ii,si,"esm2017")}var Tc=300,yc=Nt("authIdTokenMaxAge")||Tc,oi=null,wc=t=>e=>u(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>yc)return;let i=n?.token;oi!==i&&(oi=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Bn(t=ye()){let e=Ge(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Dn(t,{popupRedirectResolver:Fi,persistence:[Ui,Oi,Hn]}),r=Nt("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=wc(s.toString());Vn(n,o,()=>o(n.currentUser)),Fn(n,c=>o(c))}}let i=Pt("auth");return i&&Ln(n,`http://${i}`),n}function bc(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ra({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=te("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",bc().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ec("Browser");var Vi="auth",Me=class{constructor(e){return e}},jn=class{constructor(){return Ye(Vi)}};var zn=new xe("angularfire2.auth-instances");function hu(t,e){let n=Kt(Vi,t,e);return n&&new Me(n)}function fu(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Me(r)}}var pu={provide:jn,deps:[[new Y,zn]]},mu={provide:Me,useFactory:hu,deps:[[new Y,zn],ee]};function Bd(t,...e){return _("angularfire",le.full,"auth"),Fe([mu,pu,{provide:zn,useFactory:fu(t),multi:!0,deps:[U,J,de,we,[new Y,Ze],...e]}])}var jd=N(Un,!0,2);var zd=N(Bn,!0);var qd=N(Wn,!0);var Gd=N(xn,!0,2);var Kd=N($n,!0,2);export{Iu as a,Ie as b,ur as c,vu as d,lr as e,I as f,Eu as g,y as h,x as i,b as j,v as k,g as l,F as m,O as n,Ge as o,E as p,ce as q,ye as r,_ as s,il as t,le as u,Kt as v,Ye as w,de as x,N as y,ee as z,we as A,bl as B,Al as C,Ze as D,Me as E,jn as F,Bd as G,jd as H,zd as I,qd as J,Gd as K,Kd as L};
