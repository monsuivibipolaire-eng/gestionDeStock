import{a as Ce}from"./chunk-NRUW33VR.js";import{a as De,b as we}from"./chunk-JFFEMBUM.js";import{c as ne}from"./chunk-NAZHZL2Z.js";import{a as Se}from"./chunk-5FD5A6TW.js";import{a as C,b as ge,d as fe,e as xe,f as z,g as be,h as H,j as ve,k as _e,l as ye}from"./chunk-VAUZXUCP.js";import{b as oe,c as b,d as ae,g as de,i as se,n as le,o as ue,p as ce,r as pe,s as me,t as he}from"./chunk-JJK6J4PC.js";import"./chunk-ERIR3R6Y.js";import{A as W,Ia as s,Ib as o,Jb as M,Kb as y,O as V,Qb as K,Sa as O,Vb as w,Wa as Q,Wb as N,Xb as P,_a as D,a as I,aa as Y,b as k,db as J,ea as G,jb as g,k as S,ka as F,kb as r,la as T,lb as i,ma as q,mb as R,na as j,sc as X,tb as L,tc as Z,ub as f,uc as ee,wb as v,wc as te,xc as ie,yc as re,z as U}from"./chunk-JV3ZGQQZ.js";var $e=(()=>{let p=class p{constructor(e){this.firestore=e}getPurchaseOrders(){let e=z(this.firestore,"purchaseOrders"),n=_e(e,ve("date","desc"));return fe(n,{idField:"id"})}addPurchaseOrder(e){let n=z(this.firestore,"purchaseOrders");return xe(n,k(I({},e),{createdAt:C.now()})).then(()=>{})}updatePurchaseOrder(e,n){let t=H(this.firestore,"purchaseOrders",e);return ye(t,n)}deletePurchaseOrder(e){let n=H(this.firestore,"purchaseOrders",e);return be(n)}generateOrderNumber(){let e=new Date,n=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),u=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`CMD-${n}${t}${a}-${u}`}};p.\u0275fac=function(n){return new(n||p)(G(ge))},p.\u0275prov=Y({token:p,factory:p.\u0275fac,providedIn:"root"});let c=p;return c})();var Me=()=>[];function Pe(c,p){if(c&1){let l=L();r(0,"div",33)(1,"strong"),o(2,"Erreur :"),i(),o(3),r(4,"button",34),f("click",function(){F(l);let n=v();return T(n.errorMessage="")}),o(5,"\xD7"),i()()}if(c&2){let l=v();s(3),y(" ",l.errorMessage," ")}}function Ae(c,p){c&1&&(r(0,"span"),o(1,"+ Nouvelle Commande"),i())}function Ie(c,p){c&1&&(r(0,"span"),o(1,"Fermer"),i())}function ke(c,p){if(c&1&&(r(0,"tr",56)(1,"td",57),o(2),i(),r(3,"td",57),o(4),i(),r(5,"td",57),o(6),w(7,"number"),i(),r(8,"td",58),o(9),w(10,"number"),i()()),c&2){let l=p.$implicit;s(2),M(l.productName),s(2),M(l.quantity),s(2),y("",P(7,4,l.unitPrice,"1.2-2")," DT"),s(3),y("",P(10,7,l.subtotal,"1.2-2")," DT")}}function Le(c,p){if(c&1){let l=L();r(0,"div",44)(1,"table",45)(2,"thead",46)(3,"tr")(4,"th",47),o(5,"Produit"),i(),r(6,"th",47),o(7,"Quantit\xE9"),i(),r(8,"th",47),o(9,"Prix Unit."),i(),r(10,"th",47),o(11,"Sous-total"),i()()(),r(12,"tbody"),D(13,ke,11,10,"tr",48),r(14,"tr",49)(15,"td",50),o(16,"Total :"),i(),r(17,"td",51),o(18),w(19,"number"),i()()()(),r(20,"div",52)(21,"button",53),f("click",function(){F(l);let n=v().$implicit,t=v(2);return T(t.editOrder(n))}),o(22,"Modifier"),i(),r(23,"button",54),f("click",function(){F(l);let n=v().$implicit,t=v(2);return T(t.deleteOrder(n.id,n.orderNumber))}),o(24,"Supprimer"),i(),r(25,"button",55),f("click",function(){F(l);let n=v().$implicit,t=v(2);return T(t.printItem(n))}),o(26,"Imprimer Commande"),i()()()}if(c&2){let l=v().$implicit;s(13),g("ngForOf",l.products),s(5),y("",P(19,2,l.totalAmount,"1.2-2")," DT")}}function Ne(c,p){if(c&1){let l=L();r(0,"div",38)(1,"div",39),f("click",function(){let n=F(l).$implicit,t=v(2);return T(t.toggleExpand(n.id))}),r(2,"div",40)(3,"div")(4,"strong"),o(5,"N\xB0 :"),i(),o(6),i(),r(7,"div")(8,"strong"),o(9,"Date:"),i(),o(10),i(),r(11,"div")(12,"strong"),o(13,"Fournisseur:"),i(),o(14),i(),r(15,"div")(16,"span",41),o(17),i()(),r(18,"div")(19,"strong"),o(20,"Total:"),i(),o(21),w(22,"number"),i()(),r(23,"button",42),o(24),i()(),D(25,Le,27,5,"div",43),i()}if(c&2){let l=p.$implicit,e=v(2);J("data-id",l.id),s(6),y(" ",l.orderNumber),s(4),y(" ",e.formatDate(l.date)),s(4),y(" ",l.supplier),s(2),g("ngClass",e.getStatusClass(l.status||"pending")),s(),M(e.getStatusLabel(l.status||"pending")),s(4),y(" ",P(22,9,l.totalAmount,"1.2-2")," DT"),s(3),M(e.expandedOrderId===l.id?"\u25BC":"\u25BA"),s(),g("ngIf",e.expandedOrderId===l.id)}}function Be(c,p){c&1&&(r(0,"div",59),o(1," Aucune commande trouv\xE9e. "),i())}function Ve(c,p){if(c&1&&(r(0,"div",35),D(1,Ne,26,12,"div",36),w(2,"async"),D(3,Be,2,0,"div",37),w(4,"async"),i()),c&2){let l,e=v();s(),g("ngForOf",N(2,2,e.filteredOrders$)),s(2),g("ngIf",((l=N(4,4,e.filteredOrders$))==null?null:l.length)===0)}}var it=(()=>{let p=class p{constructor(e,n,t,a,u){this.ordersService=e,this.productsService=n,this.suppliersService=t,this.fb=a,this.router=u,this.isLoading=!1,this.isEditing=!1,this.editingId=null,this.errorMessage="",this.showForm=!1,this.expandedOrderId=null,this.searchTerm="",this.searchTerm$=new S(""),this.selectedSupplier=null,this.selectedSupplier$=new S(null),this.dateFrom=null,this.dateFrom$=new S(null),this.dateTo=null,this.dateTo$=new S(null),this.minAmount=null,this.minAmount$=new S(null),this.maxAmount=null,this.maxAmount$=new S(null),this.statusFilter="all",this.statusFilter$=new S("all"),this.sortBy="date",this.sortBy$=new S("date"),this.sortOrder="desc",this.sortOrder$=new S("desc");let x=new Date().toISOString().split("T")[0];this.orderForm=this.fb.group({orderNumber:[this.ordersService.generateOrderNumber(),b.required],date:[x,b.required],supplier:["",b.required],expectedDeliveryDate:[""],products:this.fb.array([this.createProductLine()]),notes:[""],status:["pending"]})}ngOnInit(){this.loadOrders(),this.products$=this.productsService.getProducts(),this.suppliers$=this.suppliersService.getSuppliers(),this.filteredOrders$=W([this.orders$,this.searchTerm$,this.selectedSupplier$,this.dateFrom$,this.dateTo$,this.minAmount$,this.maxAmount$,this.statusFilter$,this.sortBy$,this.sortOrder$]).pipe(U(([e,n,t,a,u,x,A,_,E,B])=>{let m=e;if(n&&(m=m.filter(d=>d.orderNumber.toLowerCase().includes(n.toLowerCase()))),t&&(m=m.filter(d=>d.supplier===t)),a){let d=new Date(a);m=m.filter(h=>(h.date instanceof C?h.date.toDate():new Date(h.date))>=d)}if(u){let d=new Date(u);d.setHours(23,59,59),m=m.filter(h=>(h.date instanceof C?h.date.toDate():new Date(h.date))<=d)}return x!==null&&(m=m.filter(d=>(d.totalAmount||0)>=x)),A!==null&&(m=m.filter(d=>(d.totalAmount||0)<=A)),_!=="all"&&(m=m.filter(d=>d.status===_)),m=m.sort((d,h)=>{let $=0;if(E==="date"){let Fe=d.date instanceof C?d.date.toDate().getTime():new Date(d.date).getTime(),Te=h.date instanceof C?h.date.toDate().getTime():new Date(h.date).getTime();$=Fe-Te}else E==="supplier"?$=d.supplier.localeCompare(h.supplier):E==="amount"&&($=(d.totalAmount||0)-(h.totalAmount||0));return B==="asc"?$:-$}),m}))}get productsFormArray(){return this.orderForm.get("products")}createProductLine(){return this.fb.group({productId:["",b.required],quantity:[1,[b.required,b.min(1)]],unitPrice:[0,[b.required,b.min(.01)]]})}addProductLine(){this.productsFormArray.push(this.createProductLine())}removeProductLine(e){this.productsFormArray.length>1&&this.productsFormArray.removeAt(e)}calculateSubtotal(e){let n=this.productsFormArray.at(e).value;return(n.quantity||0)*(n.unitPrice||0)}calculateTotal(){return this.productsFormArray.controls.reduce((e,n)=>{let t=n.value;return e+(t.quantity||0)*(t.unitPrice||0)},0)}loadOrders(){this.orders$=this.ordersService.getPurchaseOrders()}onSearchChange(e){this.searchTerm=e,this.searchTerm$.next(e)}onSupplierFilterChange(e){this.selectedSupplier=e,this.selectedSupplier$.next(e)}onDateFromChange(e){this.dateFrom=e,this.dateFrom$.next(e)}onDateToChange(e){this.dateTo=e,this.dateTo$.next(e)}onMinAmountChange(e){this.minAmount=e,this.minAmount$.next(e)}onMaxAmountChange(e){this.maxAmount=e,this.maxAmount$.next(e)}onStatusFilterChange(e){this.statusFilter=e,this.statusFilter$.next(e)}onSortChange(e){this.sortBy===e?this.sortOrder=this.sortOrder==="asc"?"desc":"asc":(this.sortBy=e,this.sortOrder=this.sortBy==="date"?"desc":"asc"),this.sortBy$.next(this.sortBy),this.sortOrder$.next(this.sortOrder)}clearFilters(){this.searchTerm="",this.searchTerm$.next(""),this.selectedSupplier=null,this.selectedSupplier$.next(null),this.dateFrom=null,this.dateFrom$.next(null),this.dateTo=null,this.dateTo$.next(null),this.minAmount=null,this.minAmount$.next(null),this.maxAmount=null,this.maxAmount$.next(null),this.statusFilter="all",this.statusFilter$.next("all"),this.sortBy="date",this.sortBy$.next("date"),this.sortOrder="desc",this.sortOrder$.next("desc")}onSubmit(){if(this.orderForm.invalid){this.errorMessage="Veuillez remplir tous les champs obligatoires.";return}this.isLoading=!0,this.errorMessage="";let e=this.orderForm.value,n=e.products.map(a=>k(I({},a),{productName:this.getProductName(a.productId),subtotal:a.quantity*a.unitPrice})),t={orderNumber:e.orderNumber,date:C.fromDate(new Date(e.date)),supplier:e.supplier,products:n,totalAmount:this.calculateTotal(),notes:e.notes,status:e.status||"pending"};e.expectedDeliveryDate&&(t.expectedDeliveryDate=C.fromDate(new Date(e.expectedDeliveryDate))),this.isEditing&&this.editingId?this.ordersService.updatePurchaseOrder(this.editingId,t).then(()=>{this.resetForm(),this.loadOrders()}).catch(a=>{this.errorMessage="Erreur lors de la modification.",console.error(a)}).finally(()=>this.isLoading=!1):this.ordersService.addPurchaseOrder(t).then(()=>{this.resetForm(),this.loadOrders()}).catch(a=>{this.errorMessage="Erreur lors de l'ajout.",console.error(a)}).finally(()=>this.isLoading=!1)}editOrder(e){this.isEditing=!0,this.editingId=e.id||null;let n=e.date.toDate().toISOString().split("T")[0],t=e.expectedDeliveryDate?e.expectedDeliveryDate.toDate().toISOString().split("T")[0]:"";this.productsFormArray.clear(),e.products.forEach(a=>{this.productsFormArray.push(this.fb.group({productId:[a.productId,b.required],quantity:[a.quantity,[b.required,b.min(1)]],unitPrice:[a.unitPrice,[b.required,b.min(.01)]]}))}),this.orderForm.patchValue({orderNumber:e.orderNumber,date:n,supplier:e.supplier,expectedDeliveryDate:t,notes:e.notes,status:e.status||"pending"}),this.showForm=!0,window.scrollTo({top:0,behavior:"smooth"})}deleteOrder(e,n){confirm(`Supprimer la commande "${n}" ?`)&&(this.isLoading=!0,this.ordersService.deletePurchaseOrder(e).then(()=>{this.loadOrders()}).catch(t=>{this.errorMessage="Erreur lors de la suppression.",console.error(t)}).finally(()=>this.isLoading=!1))}resetForm(){this.productsFormArray.clear(),this.productsFormArray.push(this.createProductLine());let e=new Date().toISOString().split("T")[0];this.orderForm.patchValue({orderNumber:this.ordersService.generateOrderNumber(),date:e,supplier:"",expectedDeliveryDate:"",notes:"",status:"pending"}),this.isEditing=!1,this.editingId=null,this.errorMessage="",this.showForm=!1}toggleForm(){this.showForm=!this.showForm,this.showForm||this.resetForm()}toggleExpand(e){this.expandedOrderId=this.expandedOrderId===e?null:e}getProductName(e){let n="";return this.products$.subscribe(t=>{let a=t.find(u=>u.id===e);n=a?a.name:"Produit inconnu"}),n}formatDate(e){return e instanceof C?e.toDate().toLocaleDateString("fr-FR"):new Date(e).toLocaleDateString("fr-FR")}getStatusLabel(e){return{pending:"En Attente",confirmed:"Confirm\xE9e",delivered:"Livr\xE9e",cancelled:"Annul\xE9e"}[e]||e}getStatusClass(e){return{pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"}printList(){this.filteredOrders$.pipe(V(1)).subscribe(e=>{if(e.length===0){alert("Aucune commande \xE0 imprimer.");return}this.generatePrintHTML(e)})}generatePrintHTML(e){let n=window.open("","_blank","width=900,height=700");if(!n){alert("\u274C Popup bloqu\xE9e !");return}let t=new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),a=e.length,u=e.reduce((d,h)=>d+(h.totalAmount||0),0),x=e.reduce((d,h)=>d+h.products.length,0),A={pending:e.filter(d=>d.status==="pending").length,confirmed:e.filter(d=>d.status==="confirmed").length,delivered:e.filter(d=>d.status==="delivered").length,cancelled:e.filter(d=>d.status==="cancelled").length},_=[];this.searchTerm&&_.push(`Recherche: "${this.searchTerm}"`),this.selectedSupplier&&_.push(`Fournisseur: ${this.selectedSupplier}`),this.dateFrom&&_.push(`Date D\xE9but: ${new Date(this.dateFrom).toLocaleDateString("fr-FR")}`),this.dateTo&&_.push(`Date Fin: ${new Date(this.dateTo).toLocaleDateString("fr-FR")}`),this.minAmount!==null&&_.push(`Montant Min: ${this.minAmount} DT`),this.maxAmount!==null&&_.push(`Montant Max: ${this.maxAmount} DT`),this.statusFilter!=="all"&&_.push(`Statut: ${this.getStatusLabel(this.statusFilter)}`);let E={date:"Date",supplier:"Fournisseur",amount:"Montant"};_.push(`Tri: ${E[this.sortBy]} (${this.sortOrder==="asc"?"\u2191":"\u2193"})`);let B=e.map((d,h)=>`
      <tr>
        <td>${h+1}</td>
        <td>${d.orderNumber}</td>
        <td>${this.formatDate(d.date)}</td>
        <td>${d.supplier}</td>
        <td>${d.products.length}</td>
        <td><span class="badge-${d.status}">${this.getStatusLabel(d.status||"pending")}</span></td>
        <td>${(d.totalAmount||0).toFixed(2)} DT</td>
      </tr>
    `).join(""),m=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>Liste Bons de Commande - ${t}</title>
        <style>
          @page { margin: 15mm; size: A4 landscape; }
          body { font-family: Arial, sans-serif; margin: 0; padding: 15px; font-size: 10pt; }
          .header { text-align: center; margin-bottom: 15px; border-bottom: 2px solid #f59e0b; padding-bottom: 10px; }
          .header h1 { font-size: 20pt; color: #f59e0b; margin: 0 0 5px 0; }
          .filters { background: #fef3c7; padding: 8px; margin-bottom: 12px; border-left: 3px solid #f59e0b; }
          .filters h3 { font-size: 11pt; margin: 0 0 5px 0; }
          .filters ul { list-style: none; padding: 0; margin: 0; }
          .filters li { font-size: 9pt; margin: 2px 0; }
          .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 15px; }
          .stat { background: #f9fafb; border: 1px solid #e5e7eb; padding: 8px; text-align: center; }
          .stat .label { font-size: 8pt; color: #666; }
          .stat .value { font-size: 14pt; font-weight: bold; color: #f59e0b; }
          table { width: 100%; border-collapse: collapse; }
          thead { background: #f59e0b; color: white; }
          th, td { padding: 6px 8px; text-align: left; border: 1px solid #ddd; font-size: 9pt; }
          tbody tr:nth-child(even) { background: #f9fafb; }
          tfoot { background: #fef3c7; font-weight: bold; }
          .badge-pending { background: #fef3c7; color: #92400e; padding: 2px 6px; border-radius: 3px; }
          .badge-confirmed { background: #dbeafe; color: #1e40af; padding: 2px 6px; border-radius: 3px; }
          .badge-delivered { background: #d1fae5; color: #065f46; padding: 2px 6px; border-radius: 3px; }
          .badge-cancelled { background: #fee2e2; color: #991b1b; padding: 2px 6px; border-radius: 3px; }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>\u{1F4CB} Bons de Commande - Liste</h1>
          <p>Date d'impression : ${t}</p>
        </div>
        <div class="filters">
          <h3>Filtres Appliqu\xE9s</h3>
          <ul>${_.map(d=>`<li>\u2022 ${d}</li>`).join("")}</ul>
        </div>
        <div class="stats">
          <div class="stat"><div class="label">Total Commandes</div><div class="value">${a}</div></div>
          <div class="stat"><div class="label">Total Produits</div><div class="value">${x}</div></div>
          <div class="stat"><div class="label">Montant Total</div><div class="value">${u.toFixed(2)} DT</div></div>
          <div class="stat"><div class="label">En Attente</div><div class="value">${A.pending}</div></div>
        </div>
        <table>
          <thead>
            <tr><th>#</th><th>N\xB0 Commande</th><th>Date</th><th>Fournisseur</th><th>Produits</th><th>Statut</th><th>Montant</th></tr>
          </thead>
          <tbody>${B}</tbody>
          <tfoot>
            <tr><td colspan="4">TOTAL (${a} commandes)</td><td>${x}</td><td>-</td><td>${u.toFixed(2)} DT</td></tr>
          </tfoot>
        </table>
      </body>
      </html>
    `;n.document.write(m),n.document.close(),n.focus(),setTimeout(()=>n.print(),500)}printItem(e){this.filteredOrders$.pipe(V(1)).subscribe(n=>{let t=n.find(x=>x.id===e.id);if(!t)return;let a=window.open("","_blank","width=800,height=600");if(!a)return;let u=`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>Bon de Commande ${t.orderNumber}</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { text-align: center; border-bottom: 2px solid #000; }
            table { width: 100%; border-collapse: collapse; margin: 15px 0; }
            th, td { padding: 8px; border: 1px solid #ddd; }
            th { background: #f3f4f6; }
          </style>
        </head>
        <body>
          <h1>Bon de Commande N\xB0 ${t.orderNumber}</h1>
          <table>
            <tr><th>Date</th><td>${this.formatDate(t.date)}</td></tr>
            <tr><th>Fournisseur</th><td>${t.supplier}</td></tr>
            ${t.expectedDeliveryDate?`<tr><th>Livraison Pr\xE9vue</th><td>${this.formatDate(t.expectedDeliveryDate)}</td></tr>`:""}
            <tr><th>Statut</th><td>${this.getStatusLabel(t.status||"pending")}</td></tr>
          </table>
          <h3>Produits</h3>
          <table>
            <thead>
              <tr><th>Produit</th><th>Quantit\xE9</th><th>Prix Unit.</th><th>Sous-total</th></tr>
            </thead>
            <tbody>
              ${t.products.map(x=>`
                <tr>
                  <td>${x.productName}</td>
                  <td>${x.quantity}</td>
                  <td>${x.unitPrice.toFixed(2)} DT</td>
                  <td>${x.subtotal.toFixed(2)} DT</td>
                </tr>
              `).join("")}
            </tbody>
            <tfoot>
              <tr><th colspan="3">Total</th><th>${(t.totalAmount||0).toFixed(2)} DT</th></tr>
            </tfoot>
          </table>
        </body>
        </html>
      `;a.document.write(u),a.document.close(),setTimeout(()=>{a.print(),a.close()},250)})}};p.\u0275fac=function(n){return new(n||p)(O($e),O(Se),O(Ce),O(pe),O(ne))},p.\u0275cmp=Q({type:p,selectors:[["app-purchase-order"]],decls:70,vars:20,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"text-3xl","font-bold","text-gray-800","mb-6"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",4,"ngIf"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","mb-4","gap-4"],["type","text","placeholder","\u{1F50D} Rechercher par num\xE9ro...",1,"w-full","md:w-1/3","px-4","py-2","border","rounded-lg",3,"ngModelChange","ngModel"],[1,"flex","gap-2"],[1,"bg-purple-600","hover:bg-purple-700","text-white","font-bold","py-2","px-6","rounded-lg","flex","items-center","space-x-2","no-print",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],[1,"bg-green-600","hover:bg-green-700","text-white","font-bold","py-2","px-6","rounded-lg","no-print",3,"click"],[4,"ngIf"],[1,"bg-white","shadow-md","rounded-lg","p-4","mb-6","no-print"],[1,"text-lg","font-semibold","mb-3","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["bindLabel","name","bindValue","name","placeholder","Tous",1,"w-full",3,"ngModelChange","ngModel","items","clearable"],[1,"w-full","px-3","py-2","border","rounded-lg",3,"ngModelChange","ngModel"],["value","all"],["value","pending"],["value","confirmed"],["value","delivered"],["value","cancelled"],["type","date",1,"w-full","px-3","py-2","border","rounded-lg",3,"ngModelChange","ngModel"],["value","date"],["value","supplier"],["value","amount"],["type","number","placeholder","0",1,"w-full","px-3","py-2","border","rounded-lg",3,"ngModelChange","ngModel"],["type","number","placeholder","10000",1,"w-full","px-3","py-2","border","rounded-lg",3,"ngModelChange","ngModel"],[1,"mt-4"],[1,"bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-lg",3,"click"],["class","space-y-4",4,"ngIf"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","mb-4"],[1,"float-right",3,"click"],[1,"space-y-4"],["class","bg-white shadow rounded-lg overflow-hidden voucher-card",4,"ngFor","ngForOf"],["class","text-center py-8 text-gray-500",4,"ngIf"],[1,"bg-white","shadow","rounded-lg","overflow-hidden","voucher-card"],[1,"px-6","py-4","flex","justify-between","items-center","cursor-pointer","hover:bg-gray-50",3,"click"],[1,"flex-1","grid","grid-cols-5","gap-4"],[1,"px-2","py-1","rounded","text-xs",3,"ngClass"],[1,"text-amber-600","no-print"],["class","px-6 py-4 bg-gray-50 border-t",4,"ngIf"],[1,"px-6","py-4","bg-gray-50","border-t"],[1,"min-w-full"],[1,"bg-gray-100"],[1,"px-4","py-2","text-left","text-sm"],["class","border-t",4,"ngFor","ngForOf"],[1,"bg-amber-50","font-bold"],["colspan","3",1,"px-4","py-2","text-right"],[1,"px-4","py-2","text-amber-600"],[1,"mt-4","flex","gap-2","no-print"],[1,"bg-indigo-600","hover:bg-indigo-700","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded",3,"click"],[1,"bg-purple-600","hover:bg-purple-700","text-white","px-4","py-2","rounded",3,"click"],[1,"border-t"],[1,"px-4","py-2"],[1,"px-4","py-2","font-semibold"],[1,"text-center","py-8","text-gray-500"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"h1",1),o(2,"Bons de Commande"),i(),D(3,Pe,6,1,"div",2),r(4,"div",3)(5,"input",4),f("ngModelChange",function(u){return t.onSearchChange(u)}),i(),r(6,"div",5)(7,"button",6),f("click",function(){return t.printList()}),q(),r(8,"svg",7),R(9,"path",8),i(),j(),r(10,"span"),o(11,"Imprimer Liste"),i()(),r(12,"button",9),f("click",function(){return t.toggleForm()}),D(13,Ae,2,0,"span",10)(14,Ie,2,0,"span",10),i()()(),r(15,"div",11)(16,"h3",12),q(),r(17,"svg",13),R(18,"path",14),i(),o(19," Filtres Avanc\xE9s "),i(),j(),r(20,"div",15)(21,"div")(22,"label",16),o(23,"Fournisseur"),i(),r(24,"ng-select",17),w(25,"async"),f("ngModelChange",function(u){return t.onSupplierFilterChange(u)}),i()(),r(26,"div")(27,"label",16),o(28,"Statut"),i(),r(29,"select",18),f("ngModelChange",function(u){return t.onStatusFilterChange(u)}),r(30,"option",19),o(31,"Tous"),i(),r(32,"option",20),o(33,"En Attente"),i(),r(34,"option",21),o(35,"Confirm\xE9e"),i(),r(36,"option",22),o(37,"Livr\xE9e"),i(),r(38,"option",23),o(39,"Annul\xE9e"),i()()(),r(40,"div")(41,"label",16),o(42,"Date D\xE9but"),i(),r(43,"input",24),f("ngModelChange",function(u){return t.onDateFromChange(u)}),i()(),r(44,"div")(45,"label",16),o(46,"Date Fin"),i(),r(47,"input",24),f("ngModelChange",function(u){return t.onDateToChange(u)}),i()(),r(48,"div")(49,"label",16),o(50,"Trier par"),i(),r(51,"select",18),f("ngModelChange",function(u){return t.onSortChange(u)}),r(52,"option",25),o(53),i(),r(54,"option",26),o(55),i(),r(56,"option",27),o(57),i()()(),r(58,"div")(59,"label",16),o(60,"Montant Min (DT)"),i(),r(61,"input",28),f("ngModelChange",function(u){return t.onMinAmountChange(u)}),i()(),r(62,"div")(63,"label",16),o(64,"Montant Max (DT)"),i(),r(65,"input",29),f("ngModelChange",function(u){return t.onMaxAmountChange(u)}),i()()(),r(66,"div",30)(67,"button",31),f("click",function(){return t.clearFilters()}),o(68," R\xE9initialiser Filtres "),i()()(),D(69,Ve,5,6,"div",32),i()),n&2&&(s(3),g("ngIf",t.errorMessage),s(2),g("ngModel",t.searchTerm),s(8),g("ngIf",!t.showForm),s(),g("ngIf",t.showForm),s(10),g("ngModel",t.selectedSupplier)("items",N(25,17,t.suppliers$)??K(19,Me))("clearable",!0),s(5),g("ngModel",t.statusFilter),s(14),g("ngModel",t.dateFrom),s(4),g("ngModel",t.dateTo),s(4),g("ngModel",t.sortBy),s(2),y("Date ",t.sortBy==="date"?t.sortOrder==="asc"?"\u2191":"\u2193":""),s(2),y("Fournisseur ",t.sortBy==="supplier"?t.sortOrder==="asc"?"\u2191":"\u2193":""),s(2),y("Montant ",t.sortBy==="amount"?t.sortOrder==="asc"?"\u2191":"\u2193":""),s(4),g("ngModel",t.minAmount),s(4),g("ngModel",t.maxAmount),s(4),g("ngIf",!t.isLoading))},dependencies:[he,ue,ce,oe,se,le,ae,we,De,re,X,Z,ee,me,de,te,ie],styles:[".container[_ngcontent-%COMP%]{max-width:1280px}button[_ngcontent-%COMP%]{transition:all .2s}@media (max-width: 768px){table[_ngcontent-%COMP%]{display:block;overflow-x:auto}}"]});let c=p;return c})();export{it as PurchaseOrderComponent};
